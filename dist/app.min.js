!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.app=t()}}(function(){var t;return function e(t,i,r){function n(s,a){if(!i[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){var i=t[s][1][e];return n(i?i:e)},h,h.exports,e,t,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){function r(){p&&h&&(p=!1,h.length?l=h.concat(l):d=-1,l.length&&n())}function n(){if(!p){var t=a(r);p=!0;for(var e=l.length;e;){for(h=l,l=[];++d<e;)h&&h[d].run();d=-1,e=l.length}h=null,p=!1,c(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,c,u=e.exports={};!function(){try{a=setTimeout}catch(t){a=function(){throw new Error("setTimeout is not defined")}}try{c=clearTimeout}catch(t){c=function(){throw new Error("clearTimeout is not defined")}}}();var h,l=[],p=!1,d=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new o(t,e)),1!==l.length||p||a(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(e,i,r){(function(r,n){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return"function"==typeof t}function a(t){V=t}function c(t){$=t}function u(){return function(){r.nextTick(f)}}function h(){return function(){Q(f)}}function l(){var t=0,e=new it(f),i=document.createTextNode("");return e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}function p(){var t=new MessageChannel;return t.port1.onmessage=f,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(f,1)}}function f(){for(var t=0;t<Z;t+=2){var e=ot[t],i=ot[t+1];e(i),ot[t]=void 0,ot[t+1]=void 0}Z=0}function m(){try{var t=e,i=t("vertx");return Q=i.runOnLoop||i.runOnContext,h()}catch(r){return d()}}function y(t,e){var i=this,r=new this.constructor(v);void 0===r[ct]&&j(r);var n=i._state;if(n){var o=arguments[n-1];$(function(){k(n,r,o,i._result)})}else M(i,r,t,e);return r}function g(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var i=new e(v);return S(i,t),i}function v(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function w(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return pt.error=e,pt}}function P(t,e,i,r){try{t.call(e,i,r)}catch(n){return n}}function A(t,e,i){$(function(t){var r=!1,n=P(i,e,function(i){r||(r=!0,e!==i?S(t,i):C(t,i))},function(e){r||(r=!0,O(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&n&&(r=!0,O(t,n))},t)}function E(t,e){e._state===ht?C(t,e._result):e._state===lt?O(t,e._result):M(e,void 0,function(e){S(t,e)},function(e){O(t,e)})}function x(t,e,i){e.constructor===t.constructor&&i===st&&constructor.resolve===at?E(t,e):i===pt?O(t,pt.error):void 0===i?C(t,e):s(i)?A(t,e,i):C(t,e)}function S(t,e){t===e?O(t,b()):o(e)?x(t,e,_(e)):C(t,e)}function T(t){t._onerror&&t._onerror(t._result),I(t)}function C(t,e){t._state===ut&&(t._result=e,t._state=ht,0!==t._subscribers.length&&$(I,t))}function O(t,e){t._state===ut&&(t._state=lt,t._result=e,$(T,t))}function M(t,e,i,r){var n=t._subscribers,o=n.length;t._onerror=null,n[o]=e,n[o+ht]=i,n[o+lt]=r,0===o&&t._state&&$(I,t)}function I(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var r,n,o=t._result,s=0;s<e.length;s+=3)r=e[s],n=e[s+i],r?k(i,r,n,o):n(o);t._subscribers.length=0}}function G(){this.error=null}function R(t,e){try{return t(e)}catch(i){return dt.error=i,dt}}function k(t,e,i,r){var n,o,a,c,u=s(i);if(u){if(n=R(i,r),n===dt?(c=!0,o=n.error,n=null):a=!0,e===n)return void O(e,w())}else n=r,a=!0;e._state!==ut||(u&&a?S(e,n):c?O(e,o):t===ht?C(e,n):t===lt&&O(e,n))}function F(t,e){try{e(function(e){S(t,e)},function(e){O(t,e)})}catch(i){O(t,i)}}function B(){return ft++}function j(t){t[ct]=ft++,t._state=void 0,t._result=void 0,t._subscribers=[]}function D(t){return new bt(this,t).promise}function N(t){var e=this;return new e(z(t)?function(i,r){for(var n=t.length,o=0;o<n;o++)e.resolve(t[o]).then(i,r)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function L(t){var e=this,i=new e(v);return O(i,t),i}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Y(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function W(t){this[ct]=B(),this._result=this._state=void 0,this._subscribers=[],v!==t&&("function"!=typeof t&&U(),this instanceof W?F(this,t):Y())}function H(t,e){this._instanceConstructor=t,this.promise=new t(v),this.promise[ct]||j(this.promise),z(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):O(this.promise,X())}function X(){return new Error("Array Methods must be provided an Array")}function q(){var t;if("undefined"!=typeof n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;i&&"[object Promise]"===Object.prototype.toString.call(i.resolve())&&!i.cast||(t.Promise=vt)}var K;K=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Q,V,J,z=K,Z=0,$=function(t,e){ot[Z]=t,ot[Z+1]=e,Z+=2,2===Z&&(V?V(f):J())},tt="undefined"!=typeof window?window:void 0,et=tt||{},it=et.MutationObserver||et.WebKitMutationObserver,rt="undefined"==typeof self&&"undefined"!=typeof r&&"[object process]"==={}.toString.call(r),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ot=new Array(1e3);J=rt?u():it?l():nt?p():void 0===tt&&"function"==typeof e?m():d();var st=y,at=g,ct=Math.random().toString(36).substring(16),ut=void 0,ht=1,lt=2,pt=new G,dt=new G,ft=0,mt=D,yt=N,gt=L,vt=W;W.all=mt,W.race=yt,W.resolve=at,W.reject=gt,W._setScheduler=a,W._setAsap=c,W._asap=$,W.prototype={constructor:W,then:st,"catch":function(t){return this.then(null,t)}};var bt=H;H.prototype._enumerate=function(){for(var t=this.length,e=this._input,i=0;this._state===ut&&i<t;i++)this._eachEntry(e[i],i)},H.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,r=i.resolve;if(r===at){var n=_(t);if(n===st&&t._state!==ut)this._settledAt(t._state,e,t._result);else if("function"!=typeof n)this._remaining--,this._result[e]=t;else if(i===vt){var o=new i(v);x(o,t,n),this._willSettleAt(o,e)}else this._willSettleAt(new i(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},H.prototype._settledAt=function(t,e,i){var r=this.promise;r._state===ut&&(this._remaining--,t===lt?O(r,i):this._result[e]=i),0===this._remaining&&C(r,this._result)},H.prototype._willSettleAt=function(t,e){var i=this;M(t,void 0,function(t){i._settledAt(ht,e,t)},function(t){i._settledAt(lt,e,t)})};var wt=q,_t={Promise:vt,polyfill:wt};"function"==typeof t&&t.amd?t(function(){return _t}):"undefined"!=typeof i&&i.exports?i.exports=_t:"undefined"!=typeof this&&(this.ES6Promise=_t),wt()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],3:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};t("../filters/myBlurY");var n=t("es6-promise"),o={AlreadyStarted:function(t){function e(){t.apply(this,arguments),this.name="AlreadyStartedException"}return r(e,t),e}(Error),AlreadyStopped:function(t){function e(){t.apply(this,arguments),this.name="AlreadyStoppedException"}return r(e,t),e}(Error),UnsopportedAccelarationPower:function(t){function e(){t.apply(this,arguments),this.name="UnsopportedAccelarationPowerException"}return r(e,t),e}(Error)},s=function(t){function e(){t.apply(this,arguments)}return r(e,t),e}(Phaser.Sprite),a=function(){function t(t,e,i,r,n){void 0===n&&(n=15),this.game=t,this.spriteName=e,this.framesNumber=i,this.blurFilterId=r,this.maxBlurValue=n,this.items=[],this.isStarting=!1,this.isStarted=!1,this.isStopping=!1,this.velocity=0}return Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.isStarting||this.isStarted||this.isStopping},enumerable:!0,configurable:!0}),t.prototype.create=function(t,e,i,r,n,o){void 0===n&&(n=0),void 0===o&&(o=3),this.baseX=t,this.baseY=e,this.stopYOffset=n,this.y=e+n,this.window=i,this.offset=r,this.blurFilter=this.game.add.filter(this.blurFilterId),this.blurFilter.blur=0,this.blurFilter.padding=10;for(var a=0;a<o;a++){var c=r*a,u=new s(this.game,this.baseX,this.y-c,this.spriteName);u.offset=c,u.mask=i,u.filters=[this.blurFilter],u.frame=this.getRandomFrame(),this.game.add.existing(u),this.items.push(u)}return this},t.prototype.start=function(t,e,i){var r=this;if(void 0===t&&(t=1e3),void 0===e&&(e=1),void 0===i&&(i=4),!this.isRunning){var s=function(t){switch(t){case 2:return Phaser.Easing.Quadratic;case 3:return Phaser.Easing.Cubic;case 4:return Phaser.Easing.Quartic;case 5:return Phaser.Easing.Quintic}throw new o.UnsopportedAccelarationPower("Unsopported accelaration power passed. Supported: [2, 3, 4, 5]")}(i),a=t/Phaser.Timer.SECOND,c=e*Phaser.Timer.SECOND,u=a/(1-Math.pow((c-1)/c,i)),h=this.y;return this.lastUpdateTime=this.game.time.now,this.isStarting=!0,this.startPromise=new n.Promise(function(i){r.game.add.tween(r).to({y:r.y+u},Phaser.Timer.SECOND*e,s.In,!0).onUpdateCallback(function(t,e){var i=r.y-h;h=r.y,r.update(e*r.maxBlurValue),r.velocity=i/(r.game.time.now-r.lastUpdateTime)*Phaser.Timer.SECOND,r.lastUpdateTime=r.game.time.now}).onComplete.addOnce(function(){r.startPromise=null,r.isStarting=!1,r.isStarted=!0,r.velocity=t,r.lastUpdateTime=r.game.time.now,i()})}),this.startPromise}throw new o.AlreadyStarted("Start method was already called")},t.prototype.stop=function(t){var e=this;if(this.isStarted&&!this.isStopping){this.isStopping=!0,this.isStarted=!1,this.isStarting=!1,this.update();var i=this.items[0];this.items.forEach(function(t){t.offset>i.offset&&(i=t)}),i.frame=t;var r=this.baseY-(this.y-i.offset)+this.stopYOffset,s=r-i.height;return new n.Promise(function(t){e.game.add.tween(e).to({y:e.y+s},s/e.velocity*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!0).onUpdateCallback(function(){return e.update()}).onComplete.addOnce(function(){e.game.add.tween(e).to({y:e.y+i.height},i.height/e.velocity*Phaser.Timer.SECOND*10,Phaser.Easing.Elastic.Out,!0).onUpdateCallback(function(t,i){e.update((1-i)*e.maxBlurValue)}).onComplete.addOnce(function(){e.isStopping=!1,t()})})})}if(this.isStarting)return this.startPromise.then(function(){return e.stop(t)});throw new o.AlreadyStopped("Stop method was already called")},t.prototype.onUpdate=function(){this.isStarted&&(this.y+=this.velocity*(this.game.time.now-this.lastUpdateTime)/Phaser.Timer.SECOND,this.lastUpdateTime=this.game.time.now,this.update(void 0,!0))},t.prototype.getTopVisibleItem=function(){var t=this,e=this.items.filter(function(e){return e.y>=t.baseY+t.stopYOffset}).sort(function(t,e){return t.y-e.y});return e.length?e[0]:null},t.prototype.update=function(t,e){var i=this;void 0===e&&(e=!1);var r=this.window.y+this.window.height,n=this.items.length;this.items.forEach(function(t,o){var s=t.offset,a=i.y-s;if(a>r){var c=a-r,u=n*i.offset;s+=u*Math.ceil(c/u),a=i.y-s,t.frame=i.getRandomFrame()}e&&(s-=i.y,a=-s),t.y=a,t.offset=s}),e&&(this.y=0),void 0!==t&&t!==this.blurFilter.blur&&(this.blurFilter.blur=t)},t.prototype.getRandomFrame=function(){return Math.round(Math.random()*(this.framesNumber-1))},t.Exception=o,t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a},{"../filters/myBlurY":6,"es6-promise":2}],4:[function(t,e,i){"use strict";var r=function(){function t(t,e,i){void 0===i&&(i=2e3+3e3*Math.random()),this.state=t,this.dictionary=e,this.animationMinTime=i,this.stateLoaded=!1}return t.prototype.onPreloadStart=function(){this.preloadingStartTime=this.state.time.now},t.prototype.onPreloadComplete=function(t){var e=this;void 0===t&&(t=0);var i=this.state.time.now-this.preloadingStartTime;this.state.time.events.add(i>t+this.animationMinTime?0:this.animationMinTime-i+t,function(){return e.stateLoaded=!0})},t.prototype.processLoading=function(t){var e=this,i=[0,.9],r=this.state.add.graphics(0,this.state.game.height-50).lineStyle(5,16777215,1).moveTo(0,0).lineTo(this.state.game.width,0);r.scale.x=i[0];var n=this.state.game.add.text(this.state.world.centerX,this.state.game.height-100,this.dictionary.loading,{alight:"center",fill:"#FFF",font:"45px Arial",stroke:"#FFF"});n.anchor.set(.5);var o=this.state.add.tween(r.scale).to({x:i[1]},3e3,Phaser.Easing.Quadratic.InOut,!0).onUpdateCallback(function(){if(e.stateLoaded){var s=e.state.add.tween(function(t){return t.addMultiple([r,n])&&t}(e.state.add.group())).to({alpha:0},500);o.stop(),e.state.add.tween(r.scale).to({x:1},500,Phaser.Easing.Quadratic.In,!0).chain(s),s.delay(500).onComplete.add(t)}else r.scale.x>i[0]+(i[1]-i[0])/2&&(i[0]=r.scale.x,o.timeScale/=2)})},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{}],5:[function(t,e,i){"use strict";var r={BIG_WIN:"bigwin",REEL:"reel",REG_WIN:"regwin"},n={API_BASE:"http://www.artemplatonov.com/phasering/",BOOTSTRAP_STATE:"Boot",CONFIG_PATH:"config.json",GAME:{ATLAS_SPRITE:{key:"atlas",url:{atlas:"./assets/sprites/atlas.json",texture:"./assets/sprites/atlas.png"}},AUDIO:[{key:r.REEL,urls:["./assets/audio/reel.mp3"]},{key:r.BIG_WIN,urls:["./assets/audio/bigwin.mp3"]},{key:r.REG_WIN,urls:["./assets/audio/regwin.mp3"]}],AUDIO_KEY:r,BET_RANGE:[1,5],CARDS_FRAMES_MAP:{J:0,K:1,Q:2,T:3},CARDS_NUMBER:4,CARDS_SPRITE:{key:"letters",url:{atlas:"./assets/sprites/letters.json",texture:"./assets/sprites/letters.png"}},INITIAL_BALANCE:1e3,WIN_TYPE:{BIG:"bigWin",NONE:"none",REGULAR:"regular"}},STAGE:{COLOR:1584443,CONTAINER:"game-canvas",HEIGHT:1536,WIDTH:2048}};i.basic=n},{}],6:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(e,i,r){t.call(this,e,i,r),this.uniforms.blur={type:"1f",value:1/512},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","vec4 sum = vec4(0.0);","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","gl_FragColor = sum;","}"]}return r(e,t),Object.defineProperty(e.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t},enumerable:!0,configurable:!0}),e}(Phaser.Filter);Phaser.Filter.MyBlurY=n,Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],7:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./config"),o=t("./states/"),s=function(t){function e(){var e=this;t.call(this,0,0,Phaser.AUTO,n.basic.STAGE.CONTAINER,null),Object.keys(o).forEach(function(t){return e.state.add(t,o[t])}),this.state.start(n.basic.BOOTSTRAP_STATE)}return r(e,t),e}(Phaser.Game);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{"./config":5,"./states/":16}],8:[function(t,e,i){"use strict";var r=t("./game");new r["default"]},{"./game":7}],9:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){return function(t){function e(){t.apply(this,arguments),this.drawers=[]}return r(e,t),e.prototype.draw=function(t){var e=this;this.drawers.forEach(function(i){return i(e,t)})},e.prototype.registerDrawer=function(t){this.drawers.push(t)},e}(t)};Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],10:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function(t){return function(t){function e(){t.apply(this,arguments),this.isPreloaded=!1,this.animationMinTime=3e3,this.circleParams={color1:16776960,color2:16711680,color3:255,diameter:50,distance:200,opacity:1}}return r(e,t),e.prototype.startPreLoading=function(){this.preloadingStartTime=this.time.now},e.prototype.onPreLoadComplete=function(t){var e=this,i=this.time.now-this.preloadingStartTime;setTimeout(function(){e.finishAnimation(t)},i>this.animationMinTime?0:this.animationMinTime-i)},e.prototype.finishAnimation=function(t){var e=2e3;this.isPreloaded=!0,this.add.tween(this.p1).to({x:this.p0.x,y:this.p0.y},e,Phaser.Easing.Exponential.Out,!0),this.add.tween(this.p2).to({x:this.p0.x,y:this.p0.y},e,Phaser.Easing.Exponential.Out,!0),this.add.tween(this.p3).to({x:this.p0.x,y:this.p0.y},e,Phaser.Easing.Exponential.Out,!0),this.add.tween(this.circleParams).to({opacity:0},e,Phaser.Easing.Exponential.In,!0).onComplete.add(t)},e.prototype.create=function(){t.prototype.create.call(this),this.p0=new Phaser.Point(this.world.centerX,this.world.centerY),this.p1=new Phaser.Point(this.p0.x+this.circleParams.distance,this.p0.y),this.p2=new Phaser.Point(this.p0.x+this.circleParams.distance,this.p0.y),this.p3=new Phaser.Point(this.p0.x+this.circleParams.distance,this.p0.y),this.p1.rotate(this.p0.x,this.p0.y,30,!0),this.p2.rotate(this.p0.x,this.p0.y,150,!0),this.p3.rotate(this.p0.x,this.p0.y,270,!0),this.graphics1=this.add.graphics(this.p1.x,this.p1.y),this.graphics1.beginFill(this.circleParams.color1),this.graphics1.drawCircle(0,0,this.circleParams.diameter),this.graphics1.endFill(),this.graphics2=this.add.graphics(this.p2.x,this.p2.y),this.graphics2.beginFill(this.circleParams.color2),this.graphics2.drawCircle(0,0,this.circleParams.diameter),this.graphics2.endFill(),this.graphics3=this.add.graphics(this.p3.x,this.p3.y),this.graphics3.beginFill(this.circleParams.color3),this.graphics3.drawCircle(0,0,this.circleParams.diameter),this.graphics3.endFill()},e.prototype.update=function(){if(t.prototype.update.call(this),this.isPreloaded)this.graphics1.clear(),this.graphics1.beginFill(this.circleParams.color1,this.circleParams.opacity),this.graphics1.drawCircle(0,0,this.circleParams.diameter),this.graphics1.endFill(),this.graphics2.clear(),this.graphics2.beginFill(this.circleParams.color2,this.circleParams.opacity),this.graphics2.drawCircle(0,0,this.circleParams.diameter),this.graphics2.endFill(),this.graphics3.clear(),this.graphics3.beginFill(this.circleParams.color3,this.circleParams.opacity),this.graphics3.drawCircle(0,0,this.circleParams.diameter),this.graphics3.endFill();else{var e=1+Math.abs(Math.sin(this.p1.angle(this.p0))),i=1+Math.abs(Math.sin(this.p2.angle(this.p0))),r=1+Math.abs(Math.sin(this.p3.angle(this.p0))),n=4;this.p1.rotate(this.p0.x,this.p0.y,n,!0),this.p2.rotate(this.p0.x,this.p0.y,n,!0),this.p3.rotate(this.p0.x,this.p0.y,n,!0),this.graphics1.scale.set(e,e),this.graphics2.scale.set(i,i),this.graphics3.scale.set(r,r)}this.graphics1.x=this.p2.x,this.graphics1.y=this.p1.y,this.graphics2.x=this.p1.x,this.graphics2.y=this.p2.y,this.graphics3.x=(this.p1.x+this.p2.x)/2,this.graphics3.y=this.p3.y},e}(t)}},{}],11:[function(t,e,i){"use strict";var r=function(){function t(){}return t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r},{}],12:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("../config"),o=t("./base"),s=t("../mixins/models/drawable"),a=t("../services/http"),c=function(t){function e(e,i){void 0===i&&(i=1e3),t.call(this),this._stake=e,this._balance=i,this.http=new a["default"](n.basic.API_BASE)}return r(e,t),Object.defineProperty(e.prototype,"stake",{get:function(){return this._stake},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"balance",{get:function(){return this._balance},set:function(t){this._balance=t,this.draw(["balance"])},enumerable:!0,configurable:!0}),e.prototype.draw=function(e){t.prototype.draw.call(this,e),e.indexOf("stake")!==-1&&this._stake.draw(["symbol","bet"])},e.prototype.spin=function(){return this.balance-=this._stake.bet,this.http.post("action.php",{action:"SpinRequest",data:{symbol:this._stake.symbol,bet:this._stake.bet}}).then(function(t){var e=t.data;return e})},e}(s["default"](o["default"]));Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=c},{"../config":5,"../mixins/models/drawable":9,"../services/http":14,"./base":11}],13:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("./base"),o=t("../mixins/models/drawable"),s=function(t){function e(e,i){t.call(this),this._symbol=e,this._bet=i}return r(e,t),e.prototype.isValid=function(){return null!==this._symbol&&null!==this._bet},Object.defineProperty(e.prototype,"symbol",{get:function(){return this._symbol},set:function(t){this._symbol=t,this.draw(["symbol"])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bet",{get:function(){return this._bet},set:function(t){this._bet=t,this.draw(["bet"])},enumerable:!0,configurable:!0}),e}(o["default"](n["default"]));Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{"../mixins/models/drawable":9,"./base":11}],14:[function(t,e,i){"use strict";var r=t("es6-promise"),n=function(){function t(t,e){void 0===t&&(t=""),void 0===e&&(e="application/json;charset=UTF-8"),this.baseUrl=t,this.contentType=e}return t.prototype.get=function(){throw"Unimplemened"},t.prototype.post=function(t,e){var i=this;return new r.Promise(function(r,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)if(200===o.status)try{r(JSON.parse(o.responseText))}catch(t){n(t)}else n(o)},o.open("POST",i.baseUrl+t,!0),o.setRequestHeader("Content-type",i.contentType),o.send(JSON.stringify(e))})["catch"](function(t){throw t})},t.prototype.put=function(){throw"Unimplemened"},t.prototype["delete"]=function(){throw"Unimplemened"},t}();Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{"es6-promise":2}],15:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("../config"),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.init=function(){this.stage.backgroundColor=n.basic.STAGE.COLOR},e.prototype.create=function(){var t=this,e=n.basic.STAGE;this.scale.setGameSize(e.WIDTH,e.HEIGHT),this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.windowConstraints.bottom="visual",this.scale.onSizeChange.addOnce(function(){return t.game.state.start("Preload")})},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=o},{"../config":5}],16:[function(t,e,i){"use strict";var r=t("./boot");i.Boot=r["default"];var n=t("./loadfail");i.Loadfail=n["default"];var o=t("./preload");i.Preload=o["default"];var s=t("./load");i.Load=s["default"];var a=t("./tutorial");i.Tutorial=a["default"];var c=t("./play");i.Play=c["default"]},{"./boot":15,"./load":17,"./loadfail":18,"./play":19,"./preload":20,"./tutorial":21}],17:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("../config"),o=t("../components/state/loadBar"),s=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.init=function(){var t=this;this.loadBar=new o["default"](this,this.game.myLocale),this.time.events.add(e.loadBarDebounce,function(){return t.load.isLoading||n.basic.GAME.AUDIO.some(function(e){var i=e.key;return!t.cache.isSoundDecoded(i)})?t.loadBar.processLoading(function(){return t.start()}):t.start()})},e.prototype.preload=function(){var t=this;this.loadBar.onPreloadStart(),this.load.atlas(n.basic.GAME.ATLAS_SPRITE.key,n.basic.GAME.ATLAS_SPRITE.url.texture,n.basic.GAME.ATLAS_SPRITE.url.atlas),this.load.atlas(n.basic.GAME.CARDS_SPRITE.key,n.basic.GAME.CARDS_SPRITE.url.texture,n.basic.GAME.CARDS_SPRITE.url.atlas),n.basic.GAME.AUDIO.forEach(function(e){t.load.audio(e.key,e.urls,!0)}),this.load.script("filter","https://cdn.rawgit.com/photonstorm/phaser/master/v2/filters/CheckerWave.js")},e.prototype.create=function(){var t=this;this.sound.setDecodedCallback(n.basic.GAME.AUDIO.map(function(t){var e=t.key;return e}),function(){t.loadBar.onPreloadComplete(e.loadBarDebounce)},this)},e.prototype.start=function(){this.game.state.start("Tutorial")},e.loadBarDebounce=10,e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{"../components/state/loadBar":4,"../config":5}],18:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.init=function(){this.stage.backgroundColor="#FF0000"},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}],19:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("../config"),o=t("../models/slots"),s=t("../models/stake"),a=t("../components/reel"),c=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.init=function(){this.reel=new a["default"](this.game,n.basic.GAME.CARDS_SPRITE.key,n.basic.GAME.CARDS_NUMBER,"MyBlurY"),this.slots=new o["default"](new s["default"](null,1))},e.prototype.create=function(){var t=this;this.createCards(),this.createReel(),this.createBetButtons(),this.createAudio(),this.toggleInput(!1),this.reel.start(1500,.1,2),this.reel.stop(0).then(function(){return t.toggleInput(!0)});var e={alight:"center",fill:"#fff",font:"80px Arial",stroke:"#000"},i=this.add.text(this.cardsGroup.centerX,this.cardsGroup.top-100,"Balance",e);i.anchor.set(.5,1);var r=this.add.text(this.cardsGroup.centerX,this.cardsGroup.bottom+100,null,e);r.anchor.set(.5,0),this.slots.stake.registerDrawer(function(e,i){i.forEach(function(i){switch(i){case"bet":r.setText(t.game.myLocale.bet+": "+e.bet);break;case"symbol":var o=n.basic.GAME.CARDS_FRAMES_MAP[e.symbol];t.cardsGroup.children.forEach(function(t){t.frame===o?t.tint=255:t.tint=16777215})}})}),this.slots.registerDrawer(function(e,r){i.setText(t.game.myLocale.balance+": "+e.balance)}),this.slots.draw(["stake","balance"])},e.prototype.update=function(){this.reel.onUpdate()},e.prototype.createCards=function(){var t=this;this.cardsGroup=this.add.group(),this.cardsGroup.inputEnableChildren=!0;for(var e=0;e<n.basic.GAME.CARDS_NUMBER;e++){var i=this.add.button(178,this.world.centerY,n.basic.GAME.CARDS_SPRITE.key);i.frame=e,i.anchor.set(0,.5),i.x+=(i.width+50)*e,this.cardsGroup.add(i)}this.cardsGroup.onChildInputOver.add(function(t){t.tint=16711935}),this.cardsGroup.onChildInputOut.add(function(t){t.tint=16777215}),this.cardsGroup.onChildInputDown.add(function(t){t.tint=255}),this.cardsGroup.onChildInputUp.add(function(e){e.tint=16777215,t.onCardClick(e)})},e.prototype.createReel=function(){var t=256,e=256,i=300,r=5,n=10,o=this.add.graphics(this.world.width-1.5*t-50,this.world.height/2-e/2-2*e-2*(i-e));o.beginFill(16777215),o.drawRect(0,0,t,e*r+(i-e)*(r-1)),o.alpha=0,this.reel.create(this.world.width-1.5*t-50,this.world.height/2-e/2-2*e-2*(i-e),o,i,2*e+2*(i-e),r+1),this.reelFrame=this.add.graphics(this.world.width-1.5*t-50,this.world.height/2-e/2),this.reelFrame.lineStyle(10,16776960,1),this.reelFrame.drawRect(-n,-n,t+2*n,e+2*n)},e.prototype.createBetButtons=function(){var t=this;this.decrementBtn=this.add.button(this.cardsGroup.centerX-200,this.cardsGroup.bottom+80,n.basic.GAME.ATLAS_SPRITE.key,function(){t.slots.stake.bet!==n.basic.GAME.BET_RANGE[0]&&(t.slots.stake.bet--,t.toggleBetInput(!0))}),this.decrementBtn.anchor.set(.5,0),this.decrementBtn.frameName="minus-icon.png",this.incrementBtn=this.add.button(this.cardsGroup.centerX+200,this.cardsGroup.bottom+80,n.basic.GAME.ATLAS_SPRITE.key,function(){t.slots.stake.bet!==n.basic.GAME.BET_RANGE[1]&&(t.slots.stake.bet++,t.toggleBetInput(!0))}),this.incrementBtn.anchor.set(.5,0),this.incrementBtn.frameName="plus-icon.png"},e.prototype.createAudio=function(){this.reelAudio=this.add.audio(n.basic.GAME.AUDIO_KEY.REEL),this.bigwinAudio=this.add.audio(n.basic.GAME.AUDIO_KEY.BIG_WIN),this.regwinAudio=this.add.audio(n.basic.GAME.AUDIO_KEY.REG_WIN),this.reelAudio.onFadeComplete.add(function(t,e){return e||t.stop()}),this.bigwinAudio.onFadeComplete.add(function(t,e){return e||t.stop()}),this.regwinAudio.onFadeComplete.add(function(t,e){return e||t.stop()})},e.prototype.onCardClick=function(t){var e=this;try{this.reel.start(1e3+500*Math.random(),.5),this.reelAudio.loopFull(1)}catch(i){}this.slots.stake.symbol=this.getFrameSymbol(t.frame),this.slots.spin().then(function(t){var i=n.basic.GAME.CARDS_FRAMES_MAP[t.spinResult[2]];try{e.reel.stop(i).then(function(){var i=function(){e.toggleInput(!0),e.slots.stake.symbol=null,e.slots.balance+=t.totalWin};if(t.winType!==n.basic.GAME.WIN_TYPE.NONE){var r=e.reel.getTopVisibleItem(),o=r.mask;r.mask=null,r.anchor.set(.5),r.x+=r.width/2,r.y+=r.height/2,e.world.bringToTop(r),e.add.tween(r.scale).to({x:2,y:2},750,Phaser.Easing.Cubic.InOut,!0,0,1,!0).onComplete.add(function(){i(),r.mask=o,r.anchor.set(0),r.x-=r.width/2,r.y-=r.height/2,e.world.bringToTop(e.reelFrame)}),t.winType===n.basic.GAME.WIN_TYPE.BIG?e.animateBigWin(t.totalWin,2e3,500):e.animateRegWin(t.totalWin,3e3);
}else i()}),e.reelAudio.fadeOut(1e3)}catch(r){}})["catch"](function(t){e.reel.stop(-1).then(function(){return e.toggleInput(!0)}),e.reelAudio.stop(),alert("Server error occurred. Please try again.")}),this.toggleInput(!1)},e.prototype.getFrameSymbol=function(t){for(var e=n.basic.GAME.CARDS_FRAMES_MAP,i=Object.keys(e),r=0;r<i.length;r++)if(e[i[r]]===t)return i[r];throw new Error("Unknown frame")},e.prototype.toggleInput=function(t){this.cardsGroup.forEach(function(e){e.inputEnabled=t,t&&(e.input.useHandCursor=!0)},this),this.cardsGroup.alpha=t?1:.5,this.toggleBetInput(t)},e.prototype.toggleBetInput=function(t){var e=this.slots.stake.bet!==n.basic.GAME.BET_RANGE[0]&&t,i=this.slots.stake.bet!==n.basic.GAME.BET_RANGE[1]&&t;this.decrementBtn.inputEnabled=e,this.decrementBtn.alpha=e?1:.5,e&&(this.decrementBtn.input.useHandCursor=!0),this.incrementBtn.inputEnabled=i,this.incrementBtn.alpha=i?1:.5,i&&(this.incrementBtn.input.useHandCursor=!0)},e.prototype.animateBigWin=function(t,e,i){var r=this,n={count:1},o=this.add.text(this.world.centerX,this.world.centerY,n.count.toString(),{alight:"center",fill:"#fff",font:"200px Arial",stroke:"#000"});e=Math.max(500,e),o.anchor.set(.5),this.bigwinAudio.fadeIn(500),this.add.tween(o.scale).to({x:3,y:3},e,Phaser.Easing.Quadratic.In,!0,i),this.add.tween(n).to({count:t},e,Phaser.Easing.Quadratic.In,!0,i).onUpdateCallback(function(){return o.setText(n.count.toFixed(0))}).onComplete.addOnce(function(){r.time.events.add(500,function(){return o.destroy()}),r.bigwinAudio.fadeOut(500)})},e.prototype.animateRegWin=function(t,e){var i=this;this.regwinAudio.fadeIn(500),this.time.events.add(Math.max(500,e),function(){return i.regwinAudio.fadeOut(500)})},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=c},{"../components/reel":3,"../config":5,"../models/slots":12,"../models/stake":13}],20:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=t("../config"),o=t("../mixins/states/preloadingAnimated"),s=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.create=function(){t.prototype.create.call(this),this.startPreLoading()},e.prototype.startPreLoading=function(){t.prototype.startPreLoading.call(this),this.load.json("config",n.basic.API_BASE+n.basic.CONFIG_PATH),this.load.onFileComplete.add(this.onFileComplete,this),this.load.onLoadComplete.addOnce(this.onPreLoadComplete,this),this.load.start()},e.prototype.onFileComplete=function(t,e,i){if(i)switch(e){case"config":this.game.myConfig=this.cache.getJSON("config");var r=this.game.myConfig,o=r.localePath,s=r.locale;this.load.json("locale",n.basic.API_BASE+o+s+".json")}else this.load.onFileComplete.remove(this.onFileComplete,this),this.game.state.start("Loadfail")},e.prototype.onPreLoadComplete=function(){var e=this;t.prototype.onPreLoadComplete.call(this,function(){return e.game.state.start("Load")}),this.game.myLocale=this.cache.getJSON("locale")},e}(o["default"](Phaser.State));Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=s},{"../config":5,"../mixins/states/preloadingAnimated":10}],21:[function(t,e,i){"use strict";var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.create=function(){this.initControls(),this.wavesFilter=this.add.filter("CheckerWave",this.world.width,this.world.height);var t=this.add.sprite(0,0);t.width=this.world.width,t.height=this.world.height,t.filters=[this.wavesFilter];var e={alight:"center",fill:"#fff",font:"100px Arial",stroke:"#000"},i=this.game.add.text(this.game.world.centerX,this.game.world.centerY-100,this.game.myLocale.gameTitle,e);i.anchor.set(.5),e.font="48px Arial";var r=this.game.add.text(this.game.world.centerX,this.game.world.centerY,this.game.myLocale.gameInstructions,e);r.anchor.set(.5)},e.prototype.update=function(){this.wavesFilter.update()},e.prototype.initControls=function(){var t=this;this.game.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR).onDown.addOnce(function(){return t.game.state.start("Play")})},e}(Phaser.State);Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n},{}]},{},[8])(8)});
//# sourceMappingURL=app.min.js.map
